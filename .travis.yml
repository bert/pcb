language: c

os:
  - linux

compiler:
  - gcc
  - clang

addons:
  apt:
    packages:
      - graphviz
      - intltool
      - libgd2-noxpm
      - libgd2-noxpm-dev
      - lesstif2
      - lesstif2-dev
      - libghc-gtkglext-prof
      - libsqlite3-dev
      - libdbus-glib-1-dev
      - libdbus-1-dev
      - desktop-file-utils

before_install:
  - sudo apt-get -qq update
  - sudo apt-get install -y libgtk2.0-dev autopoint libgettextpo-dev
    libstroke0-dev guile-2.0-dev flex bison groff texinfo texlive-base
    texlive-generic-recommended texlive-latex-base texlive-full
  - ./scripts/install_autoconf.sh
  - ./scripts/install_gettext.sh
  - ./scripts/install_geda_gaf.sh
  - ./scripts/install_gerbv.sh

script: scripts/build.sh

# blacklist
branches:
  except:
    - master

# whitelist
branches:
  only:
    - devel

notifications:
  recipients:
    - bert.timmerman@xs4all.nl
  email:
    on_success: change
    on_failure: always

