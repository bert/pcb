dist: xenial

language: c

os:
  - linux

compiler:
  - gcc
  - clang

before_install:
  - sudo apt-get -qq update
  - sudo apt-get install -y libgtk2.0-dev
    autopoint
    autotools-dev
    bison
    desktop-file-utils
    flex
    gettext
    graphviz
    groff
    guile-2.0-dev
    intltool
    libdbus-1-dev
    libdbus-glib-1-dev
    libgd-dev
    libgettextpo-dev
    libghc-opengl-dev
    libgtkglext1-dev
    libmotif-dev
    libsqlite3-dev
    libstroke0-dev
    texinfo
    texlive-base
    texlive-full
    texlive-generic-recommended
    texlive-latex-base
  #- ./scripts/install_gettext.sh
  #- ./scripts/install_autoconf.sh
  # FIXME[2017-02-15] This is required because Ubuntu Trusty only has
  # Guile-2.0.9, which doesn't include SRFI-64
  - sudo mkdir -p /usr/share/guile/2.0/srfi/srfi-64
  - sudo curl http://git.savannah.gnu.org/cgit/guile.git/plain/module/srfi/srfi-64.scm -o /usr/share/guile/2.0/srfi/srfi-64.scm 
  - sudo curl http://git.savannah.gnu.org/cgit/guile.git/plain/module/srfi/srfi-64/testing.scm -o /usr/share/guile/2.0/srfi/srfi-64/testing.scm
  #- ./scripts/install_geda_gaf.sh
  #- ./scripts/install_gerbv.sh

script: scripts/build.sh

# blacklist
branches:
  except:
    - master

# whitelist
branches:
  only:
    - devel

notifications:
  recipients:
    - pcb-travis-ci@lists.launchpad.net
  email:
    on_success: always
    on_failure: always

